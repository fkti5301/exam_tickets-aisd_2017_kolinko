# Вопрос 49: Контейнеры - хэш-таблицы
---
Хэш-таблица - обобщение способа хранения множества целых чисел (ключей) в форме вектора битов на случай, когда мощность универсума _U_ очень велика по отношению к мощности множеств, с которыми нужно работать. Функция отображения преобразует значения ключей к интервалу [0, m-1], где _m_ - размер хэш-таблицы, _m_ << |_U_|. В хэш-таблице хранятся значения ключей и имеется возможность размещения в ней более одного ключа для каждого значения функции отображения (разрешать коллизии).
Условия уменьшения возможности коллизий:
1. Размер хэш-таблицы с запасом. Если размер таблицы превышает мощность хранимого множества более чем вдвое, вероятность коллизии становится меньше 0.5. Если размер множества заранее не известен, то выбирают начальный размер, а затем таблицу перестраивают с увеличением размера (обычно вдвое).
2. Подобрать функцию отображения (хэш-функцию) такую, чтобы все ячейки таблицы были востребованы с равной вероятностью.
По способу разрешения коллизий различают хэш-таблицы двух типов:
1. С открытой адресацией. Конфликтующие значения ключей размещаются в свободных ячейках таблицы.
2. С цепочками переполнения. Каждая ячейка таблицы содержит указатель на список конфликтующих ключей.
Таблица второго типа применяестя чаще, потому что для них не существует проблемы переполнения. При слишком большой мощности хранимого множества таблица работает как _m_ списков. Если таблица построена правильно и не переполнена, проверка принадлежности, втавка и удаление элемента выполняется за постоянное время, примерно такое же, как и в массиве битов.
За постоянное время выполняются и двуместные операции над множествами: объединение, пересечениеи разность.
В хэш-таблице можно хранить и множество с повторениями: совпадающие значения ключей не создают никаких проблем, кроме коллизий, которые решаются обычным образом.
Худший случай оценки времени: _O(n)_ - для поиска и удаления элемента, _O(n^2)_ - для двуместной операции над множествами.
Если ключи - целые числа, то хорошие результаты можно получить с хэш-функцией вида:
`_h(x) = (a * x + b) % m_`
где _m_ - таблицы, а _a_ и _b_ - простые числа.
Обычно _a_ выбирается близким по значению к _m_, а _b_ - к 1. Так, при _m_ = 100 можно взять _a_ = 97, _b_ = 11. Такой выбор обеспечивает равномерное использование всех ячеек в большинстве практичесикх случаев.